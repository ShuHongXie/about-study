<!--
 * @Author: 谢树宏
 * @Date: 2022-02-17 17:12:37
 * @LastEditors: 谢树宏
 * @LastEditTime: 2022-02-17 17:38:12
 * @FilePath: /about-study/操作系统.md
-->

参考 https://juejin.cn/post/6936486914568486943

### 计算机操作系统相关

![](https://www.xiesmallxie.cn/20220217172144.png)

![](https://www.xiesmallxie.cn/20220217171624.jpg)

从上面看，macbook pro 的 cpu(处理器)1 个,6 核心

**多 CPU**： 是指简单的多个 CPU 工作在同一个系统上，多个 CPU 之间的通讯是通过主板上的总线进行的

**多核** ：是指一个 CPU 有多个核心处理器，处理器之间通过 CPU 内部总线进行通讯

![](https://www.xiesmallxie.cn/20220217172657.png)

**进程**：是操作系统（OS）进行资源（CPU、内存、磁盘、IO、带宽等）分配的最小单位。一个进程就是一个程序的运行实例

启动一个程序的时候，操作系统会为该程序创建一块内存，用来存放代码、运行中的数据和一个执行任务的主线程，我们把这样的一个运行环境叫进程

例如：打开一个浏览器、一个聊天窗口分别是一个进程。进程可以有多个子任务，如聊天工具接收消息、发送消息，这些子任务成为线程。
**线程**: 是 CPU 调度和分配的基本单位。操作系统会根据进程的优先级和线程的优先级去调度 CPU。
**线程数**: 是一种逻辑概念，是模拟出的 CPU 核心数 。

![](https://www.xiesmallxie.cn/20220217172927.png)

进程和线程的关系描述如下：

进程可以简单理解为一个容器有自己独立的地址空间。一个进程可由多个线程的执行单元组成，每个线程都运行在同一进程的上下文中，共享进程该地址空间以及其内的代码和全局数据等资源即**线程之间共享进程中的数据**

每个进程至少有一个主线程，它无需由用户主动创建，一般由系统自动创建。系统创建好进程后，实际上就启动了执行该进程的执行主线程，执行主线程以函数地址形式，即程序入口函数（如 main 函数），将程序的启动点提供给操作系统。**主执行线程终止或关闭，进程也就随之终止，操作系统会回收改进程所占用的资源**

**进程中的任意一线程执行出错，都会导致整个进程的崩溃。**

进程之间的内容相互隔离。进程隔离是为保护操作系统中进程互不干扰的技术，每一个进程只能访问自己占有的数据，也就避免出现进程 A 写入数据到进程 B 的情况。正是因为进程之间的数据是严格隔离的，所以一个进程如果崩溃了，或者挂起了，是不会影响到其他进程的。如果进程之间需要进行数据的通信，这时候，就需要使用用于进程间通信（IPC）的机制了。

严格讲应该是**线程能够获得 CPU 资源**，进程对 CPU 资源的获取也是体现在线程上的。**CPU 内核数，和进程线程没直接关系**。操作系统（OS）可以把某个进程部署在某个 CPU 核上，但这取决于系统设计。

进程、线程都是由操作系统调度的，**线程只是由进程创建，但是进程本身不会负责调度线程**。在操作系统看来，线程和进程其实差不多，不同点是线程是迷你的进程，并且进程可以包含多个线程

对于内存堆内存、代码区一般属于一个进程，但是栈(执行栈)却是属于一个线程的，且每个线程拥有一个独立的栈
