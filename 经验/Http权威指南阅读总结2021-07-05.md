## HTTP 基础分层架构

1. 应用层: HTTP，DNS，FTP
2. 传输层: TCP，UDP
3. 网络层: IP
4. 数据链路: 控制操作系统、硬件的设备驱 动、NIC（Network Interface Card，网络适配器，即网卡），及光纤等 物理可见部分（还包括连接器等一切传输媒介）。

## 请求过程每个层的作用

HTTP 生成请求报文，TCP 按顺序将报文切割生成多个顺序序号的报文段，把报文段可靠地传输给对方，IP 主要搜索对方的地址，一边中转一遍传送(因为每个地址在同一局域网的情况是很少的，所以可能需要多次中转，使用 ARP 协议解析地址)

## HTTP/1.1 特点

1. connection: keep-alive 持久链接(减少 tcp 建立和资源获取的时间，注: http/1.0 并未标准化)
2. 管线化(不用等待响应就能发送下一次请求)

## HTTP/1.1 的客户身份认证方式

1. BASIC 认证（基本认证）
2. DIGEST 认证（摘要认证）
3. SSL 客户端认证
4. FormBase 认证（基于表单认证）

## HTTP/2.0 新增

1. 多路复用流（通过单一的 TCP 连接，可以无限制处理多个 HTTP 请求。所有请求 的处理都在一条 TCP 连接上完成，因此 TCP 的处理效率得到提高）
2. 赋予请求优先级 （SPDY 不仅可以无限制地并发处理请求，还可以给请求逐个分配优先 级顺序。这样主要是为了在发送多个请求时，解决因带宽低而导致响 应变慢的问题。）
3. 压缩 HTTP 首部
4. 服务端推送

## HTTP 报文详解

1. 内容压缩 gzip（GNU zip），compress（UNIX 系统的标准压缩），deflateidentity（不进行编码）（zlib）

## HTTP 状态码

- 1XX Informational（信息性状态码） 接收的请求正在处理
- 2XX Success（成功状态码） 请求正常处理完毕
- 3XX Redirection（重定向状态码） 需要进行附加操作以完成请求
- 4XX Client Error（客户端错误状态码） 服务器无法处理请求
- 5XX Server Error（服务器错误状态码） 服务器处理请求出错

**其中 301(永久重定向)，302(临时重定向) 301 会导致 url 劫持，搜索引擎搜索到的自己发布的内容是在别人的网站上**

**400(传参错误)，401(鉴权失效，未登录), 403(无权限)，404(没有找到该 URL)**

## 与 HTTP 协作的 web 服务器（代理、网关、隧 道）

1. 网关和代理基本功能差不多，但是当 HTTP 请求的对象不支持 HTTP 协议时，利用网关可以由 HTTP 请求转化为其他协议通信，利用网关能提高通信的安全性，因为可以在客户端与网关之间的通信 线路上加密以确保连接的安全。比如，网关可以连接数据库，使用 SQL 语句查询数据。另外，在 Web 购物网站上进行信用卡结算时， 网关可以和信用卡结算系统联动。
2. 隧道可按要求建立起一条与其他服务器的通信线路，届时使用 SSL 等 加密手段进行通信。隧道的目的是确保客户端能与服务器进行安全的 通信。

## HTTP 协议缺点

1. 通信使用明文（不加密），内容可能会被窃听(TSL,SSL 加密解决)
2. 不验证通信方的身份，因此有可能遭遇伪装(SSL 加密提供证书)
3. 无法验证报文的完整性,内容有可能被篡改，也就是 DOS 中间人攻击(MD5 和 SHA-1 等散列值校验)

## HTTP 加密

1. 采用对称加密和非对称加密(公开密钥加密方式获取公钥，保证安全性，用共享密钥进行解密，提升速度， 共享密闭比公开密钥的速度快)
2. HTTPS 采用混合加密机制 HTTPS 采用共享密钥加密和公开密钥加密两者并用的混合加密 机制。若密钥能够实现安全交换，那么有可能会考虑仅使用公开 密钥加密来通信。但是公开密钥加密与共享密钥加密相比，其处 理速度要慢。 所以应充分利用两者各自的优势，将多种方法组合起来用于通 信。在交换密钥环节使用公开密钥加密方式，之后的建立通信交 换报文阶段则使用共享密钥加密方式。

如何判断公开密钥的正确性？ 使用 CA 证书
