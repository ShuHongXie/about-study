## 前言

由于公司之前的项目用的有赞的 saas，每年的费用高达几十万，对于小公司来说是一笔不小的支出所以另行组建了团队。我 5 月份进来作为前端这块的组长，在主导小程序的时候，另外一个比较重要的任务是需要从 0 到 1 主导管理低代码物料平台，以支持运营同事小程序前端的自定义编辑操作，后期可能还要兼容到 H5

### 技术选型

目前市面上不管是 Vue 或者 React 已经有了较为成熟的方案，搭配公司主要技术栈，还是以 Vue3 全家桶搭配 vite/webpack 这一套为主

### 低代码平台的操作方式

| 市面方案            |             优缺点             |               难易度               |
| :------------------ | :----------------------------: | :--------------------------------: |
| 代码驱动+json 段    | 比较适合开发人员作为主要操作者 | 有一定难度，特别对于不会代码的同学 |
| 拖拽驱动+自定义配置 |    适合对技术一窍不通的小白    |             基本无难度             |

**基于公司运营同学本身特点优先还是选用了拖拽驱动+自定义配置**

### 基础 demo 图 如下

![](https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/activity.png?imageMogr2/thumbnail/600)

### **可以预见的难点**

1. PC 端尺寸单位为 px，小程序前台为 rpx，是否需要做兼容？
2. PC 端组件的组件为原生，小程序是自己封装的一套，如何进行适配？
3. 如果有商品组件的话，或者更多需要网络请求的，如何动态化保存当前组件中商品信息，在前端如何自定义请求？
4. 组件中可能会存在很多用户态的校验，事件绑定逻辑的情况，这一块要如何处理？
5. 预览和草稿功能的实现

### 问题 1

通常不需要做兼容，因为公司 UI 的宽度都是以 375 的屏幕宽度来定义设计图，在前台设编辑器窗口计预览的时候，把宽度也定义成 375 既可

### 问题 2

由于公司小程序是原生的，并不具备像 uni-app 或 taro 这种条件编译的情况，所以两边没办法用同一套的方案，除非后面基本技术栈转成 taro 或 uni-app。那目前的办法就只能在 PC 维护一套，然后自行通过小程序语法做人工的同步功能适配。

### 问题 3

商品组件中如果有网络请求的情况下，目前想到的解决方法有 2 个：第一是前端通过数据模型对象数组项里面的某一个 key 值，判断某一个 key 来做 http 请求处理，这样的性能好，但是体验差。第二是把当前选择商品放在后端，后端查询后集体返回，这样的话体验好，但是网络请求的时间可能会稍长，经过深思熟虑后还是选用了前者

### 问题 4

事件绑定的情况下，数据模型单独拎出一个 key，循环所有的 key 挂载在小程序 this 对象里面，小程序端和 PC 端同步命名，这样可以解决事件绑定问题。对于用户态，只需要在小程序事件绑定方法内增加一个用户态拦截指令即可

### 问题 5

预览和保存功能由于是在 H5 端，所以处理方式都是通过数据模型来做映射，好的一点是可以和 PC 那边一样共用组件，减少开发二次开发的难度

### 总结

此 下一篇。
